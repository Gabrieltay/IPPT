function initLocalStorage(){null==window.localStorage.getItem("age")&&window.localStorage.setItem("age",30)}function initAdjustmenet(){calculateReward2Score()}function constantAdjustment(){agegrouprw=getAgeGroup(parseInt($("#age-input").val()));var r=getAwardPoints($("#select-choice-rewards").val());if("SITUP"==$("input[name*=radio-choice-a]:checked").val()){remaining=r-SitupScore2Point(agegrouprw,situprw),remaining>75&&($("#situp-rw-slider").val(SitupPoint2Score(agegrouprw,r-75)),$("#situp-rw-slider").slider("refresh"),situprw=$("#situp-rw-slider").val(),remaining=r-SitupScore2Point(agegrouprw,situprw));var e=Math.floor(remaining/3);$("#pushup-rw-slider").val(PushupPoint2Score(agegrouprw,e)),$("#pushup-rw-slider").slider("refresh"),$("#running-rw-slider").val(1100-RunningPoint2Score(agegrouprw,remaining-e)),$("#running-rw-slider").slider("refresh");var n=secondsToTimeString(parseInt(RunningPoint2Score(agegrouprw,remaining-e)));$(".rw-timeLabel").val(n)}else if("PUSHUP"==$("input[name*=radio-choice-a]:checked").val()){remaining=r-PushupScore2Point(agegrouprw,pushuprw),remaining>75&&($("#pushup-rw-slider").val(PushupPoint2Score(agegrouprw,r-75)),$("#pushup-rw-slider").slider("refresh"),pushuprw=$("#pushup-rw-slider").val(),remaining=r-PushupScore2Point(agegrouprw,pushuprw));var e=Math.floor(remaining/3);$("#situp-rw-slider").val(SitupPoint2Score(agegrouprw,e)),$("#situp-rw-slider").slider("refresh"),$("#running-rw-slider").val(1100-RunningPoint2Score(agegrouprw,remaining-e)),$("#running-rw-slider").slider("refresh");var n=secondsToTimeString(parseInt(RunningPoint2Score(agegrouprw,remaining-e)));$(".rw-timeLabel").val(n)}else{remaining=r-RunningScore2Point(agegrouprw,runningrw),remaining>50&&($("#running-rw-slider").val(1100-RunningPoint2Score(agegrouprw,r-50)),$("#running-rw-slider").slider("refresh"),runningrw=parseInt(1100-$("#running-rw-slider").val()),remaining=r-RunningScore2Point(agegrouprw,runningrw));var e=Math.floor(remaining/2);$("#situp-rw-slider").val(SitupPoint2Score(agegrouprw,e)),$("#situp-rw-slider").slider("refresh"),$("#pushup-rw-slider").val(PushupPoint2Score(agegrouprw,remaining-e)),$("#pushup-rw-slider").slider("refresh")}}function calculateReward2Score(){agegrouprw=getAgeGroup(parseInt($("#age-input").val())),calculateSitupReward2Score(),calculatePushupReward2Score(),calculateRunningReward2Score(),calculateTotalReward2Score()}function calculateSitupReward2Score(){situprw=$("#situp-rw-slider").val(),$("#situp-rw-pts").text(SitupScore2Point(agegrouprw,situprw))}function calculatePushupReward2Score(){pushuprw=$("#pushup-rw-slider").val(),$("#pushup-rw-pts").text(PushupScore2Point(agegrouprw,pushuprw))}function calculateRunningReward2Score(){runningrw=parseInt(1100-$("#running-rw-slider").val()),$("#running-rw-pts").text(RunningScore2Point(agegrouprw,runningrw))}function calculateTotalReward2Score(){rwtotal=parseInt(SitupScore2Point(agegrouprw,situprw))+parseInt(PushupScore2Point(agegrouprw,pushuprw))+parseInt(RunningScore2Point(agegrouprw,runningrw)),$("#rw-total").text(rwtotal)}function calculatePts2Score(){agegroupts=getAgeGroup(parseInt($("#age-input").val())),calculateSitupPts2Score(),calculatePushupPts2Score(),calculateRunningPts2Score(),calculateTotalPts2Score()}function calculateSitupPts2Score(){situppts=$("#situp-pts-slider").val(),$("#situp-score").text(SitupPoint2Score(agegroupts,situppts))}function calculatePushupPts2Score(){pushuppts=$("#pushup-pts-slider").val(),$("#pushup-score").text(PushupPoint2Score(agegroupts,pushuppts))}function calculateRunningPts2Score(){runningpts=$("#running-pts-slider").val(),$("#running-score").text(secondsToTimeString(RunningPoint2Score(agegroupts,runningpts)))}function calculateTotalPts2Score(){pstotal=parseInt(situppts)+parseInt(pushuppts)+parseInt(runningpts),$("#ps-total").text(pstotal),$("#ps-award").text(getAward(pstotal)+"   "+getNextAward(pstotal))}function calculateScore2Pts(){agegroupscore=getAgeGroup(parseInt($("#age-input").val())),calculateSitupScore2Pts(),calculatePushupScore2Pts(),calculateRunningScore2Pts(),calculateTotalScore2Pts()}function calculateSitupScore2Pts(){situpscore=$("#situp-score-slider").val(),$("#situp-pts").text(SitupScore2Point(agegroupscore,situpscore))}function calculatePushupScore2Pts(){pushupscore=$("#pushup-score-slider").val(),$("#pushup-pts").text(PushupScore2Point(agegroupscore,pushupscore))}function calculateRunningScore2Pts(){runningscore=parseInt(1100-$("#running-score-slider").val()),$("#running-pts").text(RunningScore2Point(agegroupscore,runningscore))}function calculateTotalScore2Pts(){sptotal=parseInt(SitupScore2Point(agegroupscore,situpscore))+parseInt(PushupScore2Point(agegroupscore,pushupscore))+parseInt(RunningScore2Point(agegroupscore,runningscore)),$("#sp-total").text(sptotal),$("#sp-award").text(getAward(sptotal)+"   "+getNextAward(sptotal))}function populateSitupTable(){$(".table").empty(),agegroupsum=getAgeGroup(parseInt($("#age-input").val())),$(".table").append("<tr><td>Situps</td><td>Points</td></tr>");for(var r=60;r>0;r--)$(".table").append("<tr><td>"+r+"</td><td>"+SitupScore2Point(agegroupsum,r)+"</td></tr>")}function populatePushupTable(){$(".table").empty(),agegroupsum=getAgeGroup(parseInt($("#age-input").val())),$(".table").append("<tr><td>Pushups</td><td>Points</td></tr>");for(var r=60;r>0;r--)$(".table").append("<tr><td>"+r+"</td><td>"+PushupScore2Point(agegroupsum,r)+"</td></tr>")}function populateRunningTable(){$(".table").empty(),agegroupsum=getAgeGroup(parseInt($("#age-input").val())),$(".table").append("<tr><td>2.4Km Time</td><td>Points</td></tr>");for(var r=510;1100>=r;r+=10)$(".table").append("<tr><td>"+secondsToTimeString(r)+"</td><td>"+RunningScore2Point(agegroupsum,r)+"</td></tr>")}function getAgeGroup(r){return 22>r?1:r>=22&&24>=r?2:r>=25&&27>=r?3:r>=28&&30>=r?4:r>=31&&33>=r?5:r>=34&&36>=r?6:r>=37&&39>=r?7:r>=40&&42>=r?8:r>=43&&45>=r?9:r>=46&&48>=r?10:r>=49&&51>=r?11:r>=52&&54>=r?12:r>=55&&57>=r?13:r>=58&&60>=r?14:0}function getAward(r){return r>=90?awards.GOLDPLUS:r>=85?awards.GOLD:r>=75?awards.SILVER:r>=61?awards.PASSPLUS:r>=51?awards.PASS:awards.FAIL}function getAwardPoints(r){return r==awards.GOLDPLUS?90:r==awards.GOLD?85:r==awards.SILVER?75:r==awards.PASSPLUS?61:51}function getNextAward(r){var e=0,n=getAward(r);if(n===awards.GOLDPLUS)return"";for(;n==getAward(r+e);)e++;return console.log("("+e+" points to "+getAward(r+e)+")"),"( "+e+" points to "+getAward(r+e)+" )"}function secondsToTimeString(r){var e=Math.floor(r/60),n=r-60*e;return pad(e,2)+":"+pad(n,2)}function IntToTime(r){var e=parseInt(r/60),n=r-60*e,t=e+":"+(10>n?"0"+n:n);return t}function pad(r,e,n){return n=n||"0",r+="",r.length>=e?r:new Array(e-r.length+1).join(n)+r}function isNumeric(r){return!isNaN(parseFloat(r))&&isFinite(r)}var awards={FAIL:"FAIL",PASS:"PASS",PASSPLUS:"PASS PLUS",SILVER:"SILVER",GOLD:"GOLD",GOLDPLUS:"GOLD PLUS"},agegroupts=0,situppts=0,pushuppts=0,runningpts=0,pstotal=0,agegroupscore=0,situpscore=0,pushupscore=0,runningscore=0,sptotal=0,agegrouprw=0,situprw=0,situprwpts=0,pushuprw=0,pushuprwpts=0,runningrw=0,runningrwpts=0,rwtotal=0,target=0,remaining=0,agegroupsum=0;$(document).on("pageinit","#home-page",function(){console.log("Init home-page"),$("#age-input").change(function(){isNumeric($("#age-input").val())&&parseInt($("#age-input").val())>=16&&parseInt($("#age-input").val())<=60&&(calculateScore2Pts(),calculatePts2Score(),window.localStorage.setItem("age",Math.floor(parseInt($("#age-input").val()))))})}),$(document).on("pageinit","#ps-page",function(){console.log("Init ps-page"),$("#situp-pts-slider").change(function(){calculateSitupPts2Score(),calculateTotalPts2Score()}),$("#pushup-pts-slider").change(function(){calculatePushupPts2Score(),calculateTotalPts2Score()}),$("#running-pts-slider").change(function(){calculateRunningPts2Score(),calculateTotalPts2Score()})}),$(document).on("pageinit","#sp-page",function(){console.log("Init sp-page"),$("#situp-score-slider").change(function(){calculateSitupScore2Pts(),calculateTotalScore2Pts()}),$("#pushup-score-slider").change(function(){calculatePushupScore2Pts(),calculateTotalScore2Pts()}),$("#running-score-slider").change(function(){calculateRunningScore2Pts(),calculateTotalScore2Pts()}),$(".timeLabel").remove(),$("#running-score-slider").parent().prepend('<input type="text" data-role="none" class="timeLabel score-pts-slider ui-shadow-inset ui-body-inherit ui-corner-all ui-slider-input" value="12:00" disabled />'),$("#running-score-slider").change(function(){var r=secondsToTimeString(parseInt(1100-$(this).val()));$(".timeLabel").val(r)})}),$(document).on("pageinit","#rs-page",function(){console.log("Init rs-page"),$("#situp-rw-slider").change(function(){calculateSitupReward2Score(),calculateTotalReward2Score()}),$("#pushup-rw-slider").change(function(){calculatePushupReward2Score(),calculateTotalReward2Score()}),$("#running-rw-slider").change(function(){calculateRunningReward2Score(),calculateTotalReward2Score()}),$("#select-choice-rewards").change(function(){constantAdjustment()}),$("#situp-rw-slider").on("slidestop",function(){if(target=getAwardPoints($("#select-choice-rewards").val()),"SITUP"==$("input[name*=radio-choice-a]:checked").val())constantAdjustment(),console.log("debug");else if("PUSHUP"==$("input[name*=radio-choice-a]:checked").val()){remaining=target-SitupScore2Point(agegrouprw,situprw)-PushupScore2Point(agegrouprw,pushuprw),remaining>50&&($("#situp-rw-slider").val(SitupPoint2Score(agegrouprw,target-PushupScore2Point(agegrouprw,pushuprw)-50)),$("#situp-rw-slider").slider("refresh"),situprw=$("#situp-rw-slider").val(),remaining=target-SitupScore2Point(agegrouprw,situprw)-PushupScore2Point(agegrouprw,pushuprw)),$("#running-rw-slider").val(1100-RunningPoint2Score(agegrouprw,remaining,!0)),$("#running-rw-slider").slider("refresh");var r=secondsToTimeString(parseInt(RunningPoint2Score(agegrouprw,remaining,!0)));$(".rw-timeLabel").val(r)}else remaining=target-SitupScore2Point(agegrouprw,situprw)-RunningScore2Point(agegrouprw,runningrw),remaining>25&&($("#situp-rw-slider").val(SitupPoint2Score(agegrouprw,target-RunningScore2Point(agegrouprw,runningrw)-25)),$("#situp-rw-slider").slider("refresh"),situprw=$("#situp-rw-slider").val(),remaining=target-SitupScore2Point(agegrouprw,situprw)-RunningScore2Point(agegrouprw,runningrw)),$("#pushup-rw-slider").val(PushupPoint2Score(agegrouprw,remaining,!0)),$("#pushup-rw-slider").slider("refresh")}),$("#pushup-rw-slider").on("slidestop",function(){if(target=getAwardPoints($("#select-choice-rewards").val()),"PUSHUP"==$("input[name*=radio-choice-a]:checked").val())constantAdjustment();else if("SITUP"==$("input[name*=radio-choice-a]:checked").val()){remaining=target-SitupScore2Point(agegrouprw,situprw)-PushupScore2Point(agegrouprw,pushuprw),remaining>50&&($("#pushup-rw-slider").val(PushupPoint2Score(agegrouprw,target-SitupScore2Point(agegrouprw,situprw)-50)),$("#pushup-rw-slider").slider("refresh"),pushuprw=$("#pushup-rw-slider").val(),remaining=target-SitupScore2Point(agegrouprw,situprw)-PushupScore2Point(agegrouprw,pushuprw)),$("#running-rw-slider").val(1100-RunningPoint2Score(agegrouprw,remaining,!0)),$("#running-rw-slider").slider("refresh");var r=secondsToTimeString(parseInt(RunningPoint2Score(agegrouprw,remaining,!0)));$(".rw-timeLabel").val(r)}else remaining=target-PushupScore2Point(agegrouprw,pushuprw)-RunningScore2Point(agegrouprw,runningrw),remaining>25&&($("#pushup-rw-slider").val(PushupPoint2Score(agegrouprw,target-RunningScore2Point(agegrouprw,runningrw)-25)),$("#pushup-rw-slider").slider("refresh"),pushuprw=$("#pushup-rw-slider").val(),remaining=target-PushupScore2Point(agegrouprw,pushuprw)-RunningScore2Point(agegrouprw,runningrw)),$("#situp-rw-slider").val(SitupPoint2Score(agegrouprw,remaining,!0)),$("#situp-rw-slider").slider("refresh")}),$("#running-rw-slider").on("slidestop",function(){target=getAwardPoints($("#select-choice-rewards").val()),"RUNNING"==$("input[name*=radio-choice-a]:checked").val()?constantAdjustment():"SITUP"==$("input[name*=radio-choice-a]:checked").val()?(remaining=target-SitupScore2Point(agegrouprw,situprw)-RunningScore2Point(agegrouprw,runningrw),remaining>25&&($("#running-rw-slider").val(1100-RunningPoint2Score(agegrouprw,target-SitupScore2Point(agegrouprw,situprw)-25)),$("#running-rw-slider").slider("refresh"),runningrw=parseInt(1100-$("#running-rw-slider").val()),remaining=target-SitupScore2Point(agegrouprw,situprw)-RunningScore2Point(agegrouprw,runningrw)),$("#pushup-rw-slider").val(PushupPoint2Score(agegrouprw,remaining,!0)),$("#pushup-rw-slider").slider("refresh")):(remaining=target-PushupScore2Point(agegrouprw,pushuprw)-RunningScore2Point(agegrouprw,runningrw),remaining>25&&($("#running-rw-slider").val(1100-RunningPoint2Score(agegrouprw,target-PushupScore2Point(agegrouprw,pushuprw)-25)),$("#running-rw-slider").slider("refresh"),runningrw=parseInt(1100-$("#running-rw-slider").val()),remaining=target-PushupScore2Point(agegrouprw,pushuprw)-RunningScore2Point(agegrouprw,runningrw)),$("#situp-rw-slider").val(SitupPoint2Score(agegrouprw,remaining,!0)),$("#situp-rw-slider").slider("refresh"))}),$(".rw-timeLabel").remove(),$("#running-rw-slider").parent().prepend('<input type="text" data-role="none" class="rw-timeLabel score-pts-slider ui-shadow-inset ui-body-inherit ui-corner-all ui-slider-input" value="12:00" disabled />'),$("#running-rw-slider").change(function(){var r=secondsToTimeString(parseInt(1100-$(this).val()));$(".rw-timeLabel").val(r)})}),$(document).on("pagecontainershow",function(){var r=$.mobile.pageContainer.pagecontainer("getActivePage").prop("id");"rs-page"===r&&constantAdjustment()});var init=function(){initLocalStorage(),createPushupArray(),createRunningArray(),createSitupArray(),$("#age-input").val(window.localStorage.getItem("age"))};$(document).ready(init);